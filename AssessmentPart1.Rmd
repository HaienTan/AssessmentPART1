```{r}
library(tidyverse)
#wang the data in straight from the web using read_csv, skipping over the 'n/a' entries as you go...
crime_rates <- read_csv("~/Master SDSV/CASA0005/20%CW/industrial/crime rates sorted.csv")
# REMOVE SOME ROWS WITH MISSING VALUES
crime_rates<-crime_rates[complete.cases(crime_rates),]
# create a subset contain samples between 2008 and 2009
crime_rates_sorted<-subset(crime_rates,Year=="2008-09")



#Load Packages (ignore any error messages about being built under a #different R version):
library(maptools)
library(RColorBrewer)
library(classInt)
library(OpenStreetMap)
library(sp)
library(rgeos)
library(tmap)
library(tmaptools)
library(sf)
library(rgdal)
library(geojsonio)
library(shinyjs)
library(methods)

#read the shapefile into a simple features object
BoroughMapSF <- read_shape("N:\\Master SDSV\\CASA0005\\GIS\\wk3\\BoundaryData\\england_lad_2011.shp", as.sf = TRUE)

#check the class of BoroughMapSF
class(BoroughMapSF)

#join the data to the @data slot in the SP data frame
BoroughDataMap2 <- BoroughMapSF %>% left_join(crime_rates_sorted, by = c("label" = "Code"))#check it's joined.

BoroughDataMap2<-subset(BoroughDataMap2,Offences=="All recorded offences")
class(BoroughDataMap2)


tm_shape(BoroughDataMap2) +
  tm_polygons("Rate",
              style="jenks",
              palette="Reds",
              midpoint=NA,
              title="The rate of offences per 1000 population")+
  tm_compass(position = c("left", "bottom"),type = "arrow") + 
  tm_scale_bar(position = c("left", "bottom")) +
  tm_layout(title = "The rates of all offences per 1000 population in 2008/09", legend.position = c("right", "bottom"))

```

```{r}
 setwd("~/Master SDSV/CASA0005/20%CW/CW_20")
 knitr::include_graphics("ArcMapCW1.jpg")
```
The assessment of the Data Source:

 

I focus on two datasets. One is the most recent boundaries for the 32 London boroughs and the City of London in shapefile format I download from the Edina Census Geography website. The other is about the crime and community safety in Borough, downloaded from The London Datastore. It provides the number of offences and crime rates per thousand people in the Metropolitan police district from 01/01/1999 to 31/01/2017. The dataset considers 32 Boroughs within Greater London, excluding the City of London, Heathrow, outer London, inner London, Metropolitan Police District (MPD) as well as England and Wales. It contains totally 6660 records with missing values. Missing values exist in the dataset since crime rate cannot be available for Heathrow due to no population figure. Additionally, it does provide sub-groups of crime figures.

 

 

The assessment of the benefits and drawbacks of GUI vs Command line generated maps:

 

In this coursework, two maps are created separately using GUI-based ArcMap and code-based R. Both maps illustrate how frequent the rates of all recorded offences are in 32 Boroughs in the year of 2008 using the darkness of the colour: the darkest  polygon the highest rate in the corresponding area. On the other hand, both maps are

 

By comparison with these two maps, the map created by ArcMap is more clear and visible. ArcMap can provide a larger interface and avoid the legend and the map to overlap. Also, the map generated by ArcMap is more straightforward. Each polygon can be labelled the corresponding name of district.

 

By comparison with two types of software, firstly, ArcMap is more user friendly for the beginner. R is more emphasis on the logic of coding. Secondly, ArcMap is more flexible to design the layout views. Maps, legends, extra contexts, etc can be inserted into anywhere users want. But using R, it is only able to locate them into rough places.

 

With regard to R, it is more efficient for larger scale mapping. Based on the same boundaries and codes, it is necessary to import various datasets, then the corresponding maps are going to come out.  
